/*! 
 Build based on gin-vue-admin 
 Time : 1697152884000 */
import{a as e,o as a,c as l,b as t,d as s,w as o,M as u,N as r,h as i,g as d,t as n,n as p,G as m,k as c,l as v,E as f,p as b,i as g}from"./index-37934f2a.js";import{E as h}from"./dialog-71aa2b38.js";import"./overlay-93d44909.js";import{E as w}from"./pagination-fb011907.js";/* empty css              */import"./tag-eed7c3b2.js";import{E as y,a as _}from"./select-6545c62b.js";import"./scrollbar-b6c70f3e.js";/* empty css               */import{E as j,a as V}from"./table-column-b85be477.js";import"./checkbox-1e8f3d72.js";/* empty css                */import{a as k,E as C}from"./form-item-0ef09b87.js";/* empty css               */import{G as x,b as U,s as A,g as D,u as S,c as T}from"./collection-926d21a4.js";import{t as E}from"./stringFun-647a78e9.js";/* empty css             */import{f as L}from"./format-c3c2b764.js";import{_ as z}from"./_plugin-vue_export-helper-1b428a4d.js";import"./isEqual-fd9c8814.js";import"./_Uint8Array-ba0cbfca.js";import"./index-fb5f2d1c.js";import"./index-f16bfdb4.js";import"./strings-45cdd6ae.js";import"./debounce-10f46826.js";import"./_initCloneObject-8bdd6672.js";import"./_baseClone-29c9b6f9.js";import"./date-225eaf4f.js";import"./dictionary-1667579d.js";import"./sysDictionary-22d05179.js";const N=e=>(b("data-v-ce4ee7bf"),e=e(),g(),e),q={class:"gva-search-box"},G={class:"statebox"},F={class:"stateitem"},H=N((()=>t("div",null,"申请中",-1))),I={class:"stateitem"},O=N((()=>t("div",null,"交易中",-1))),X={class:"stateitem"},K=N((()=>t("div",null,"成功",-1))),M={class:"stateitem"},Q=N((()=>t("div",null,"失败",-1))),R={class:"gva-table-box"},Y=N((()=>t("div",{class:"gva-btn-list"},null,-1))),Z=N((()=>t("br",null,null,-1))),$={class:"gva-pagination"},B={class:"dialog-footer"},J={name:"Api"},P=z(Object.assign(J,{setup(b){const g=e([]),z=e({path:"",apiGroup:"",method:"",description:""}),N=e([{value:0,text:"申请中"},{value:1,text:"交易中"},{value:2,text:"成功"},{value:3,text:"失败"}]),J=e([{value:"USDT",label:"USDT",type:"success"},{value:"USDC",label:"USDC",type:""}]),P=e([{value:"ETH",label:"以太坊",type:"success"},{value:"TRX",label:"波场",type:"warning"}]),W=e(""),ee=e({path:[{required:!0,message:"请输入api路径",trigger:"blur"}],apiGroup:[{required:!0,message:"请输入组名称",trigger:"blur"}],method:[{required:!0,message:"请选择请求方式",trigger:"blur"}],description:[{required:!0,message:"请输入api介绍",trigger:"blur"}]}),ae=e(1),le=e(0),te=e(10),se=e([]),oe=e({}),ue=()=>{oe.value={}},re=()=>{ae.value=1,te.value=10,me(),_e()},ie=e=>{te.value=e,me()},de=e=>{ae.value=e,me()},ne=({prop:e,order:a})=>{e&&("ID"===e&&(e="id"),oe.value.orderKey=E(e),oe.value.desc="descending"===a),me()},pe=async e=>{const a=await x({id:e.ID,refresh:e.refresh,txHash:e.txHash});console.log(a),7==a.code?(e.status=3,e.refresh++):0==a.code&&(e.status=2,e.refresh++)},me=async()=>{const e=await U({page:ae.value,pageSize:te.value,...oe.value});0===e.code&&(se.value=e.data.list,le.value=e.data.total,ae.value=e.data.page,te.value=e.data.pageSize)},ce=e(0),ve=e(0),fe=e(0),be=e(0),ge=e(0),he=e(0),we=e(0),ye=e(0),_e=async()=>{const e=await A(oe.value);ce.value=e.data.statList.failure,ve.value=e.data.statList.init,fe.value=e.data.statList.pending,be.value=e.data.statList.success,ge.value=e.data.amountList.failure,he.value=e.data.amountList.init,we.value=e.data.amountList.pending,ye.value=e.data.amountList.success},je=e([]);(async()=>{const e=await D();for(var a=0;a<e.data.users.length;a++)je.value.push({id:e.data.users[a].id,userName:e.data.users[a].userName})})(),me(),_e();const Ve=e=>{g.value=e};e(!1),e(!1);const ke=e(null),Ce=e("新增用户"),xe=e(!1),Ue=()=>{ke.value.resetFields(),z.value={path:"",apiGroup:"",method:"",description:""},xe.value=!1},Ae=async()=>{ke.value.validate((async e=>{if(e)switch(W.value){case"addApi":0===(await T(z.value)).code&&c({type:"success",message:"添加成功",showClose:!0}),me(),Ue();break;case"edit":0===(await S(z.value)).code&&c({type:"success",message:"编辑成功",showClose:!0}),me(),Ue();break;default:c({type:"error",message:"未知操作",showClose:!0})}}))};return(e,c)=>{const b=y,g=_,x=k,U=v,A=f,D=C,S=j,T=V,E=w,W=h;return a(),l("div",null,[t("div",q,[s(D,{ref:"searchForm",inline:!0,model:oe.value},{default:o((()=>[s(x,{label:"一级渠道"},{default:o((()=>[s(g,{modelValue:oe.value.channel,"onUpdate:modelValue":c[0]||(c[0]=e=>oe.value.channel=e),clearable:"",placeholder:"请选择"},{default:o((()=>[(a(!0),l(u,null,r(je.value,(e=>(a(),i(b,{key:e.userName,label:"".concat(e.userName),value:e.userName},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),s(x,{label:"用户地址"},{default:o((()=>[s(U,{modelValue:oe.value.fromAddress,"onUpdate:modelValue":c[1]||(c[1]=e=>oe.value.fromAddress=e),placeholder:""},null,8,["modelValue"])])),_:1}),s(x,{label:"状态"},{default:o((()=>[s(g,{modelValue:oe.value.status,"onUpdate:modelValue":c[2]||(c[2]=e=>oe.value.status=e),clearable:"",placeholder:"请选择"},{default:o((()=>[(a(!0),l(u,null,r(N.value,(e=>(a(),i(b,{key:e.value,label:"".concat(e.text),value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),s(x,{align:"left",label:"开始日期",width:"180"},{default:o((()=>[s(U,{modelValue:oe.value.startDate,"onUpdate:modelValue":c[3]||(c[3]=e=>oe.value.startDate=e),type:"date",placeholder:"请选择开始日期"},null,8,["modelValue"])])),_:1}),s(x,{align:"left",label:"结束日期",width:"180"},{default:o((()=>[s(U,{modelValue:oe.value.endDate,"onUpdate:modelValue":c[4]||(c[4]=e=>oe.value.endDate=e),type:"date",placeholder:"请选择开始日期"},null,8,["modelValue"])])),_:1}),s(x,null,{default:o((()=>[s(A,{type:"primary",icon:"search",onClick:re},{default:o((()=>[d("查询")])),_:1}),s(A,{icon:"refresh",onClick:ue},{default:o((()=>[d("重置")])),_:1})])),_:1})])),_:1},8,["model"])]),t("div",G,[t("div",F,[H,t("div",null,n(ve.value)+"笔",1),t("div",null,n(he.value)+"USDT",1)]),t("div",I,[O,t("div",null,n(fe.value)+"笔",1),t("div",null,n(we.value)+"USDT",1)]),t("div",X,[K,t("div",null,n(be.value)+"笔",1),t("div",null,n(ye.value)+"USDT",1)]),t("div",M,[Q,t("div",null,n(ce.value)+"笔",1),t("div",null,n(ge.value)+"USDT",1)])]),t("div",R,[Y,s(T,{data:se.value,onSortChange:ne,onSelectionChange:Ve},{default:o((()=>[s(S,{type:"selection",width:"55"}),s(S,{align:"left",label:"id","min-width":"60",prop:"ID",sortable:"custom"}),s(S,{align:"left",label:"用户地址","min-width":"150",prop:"fromAddress",sortable:"custom"}),s(S,{align:"left",label:"金额","min-width":"80",prop:"withdrawAmount",sortable:"custom"}),s(S,{align:"center",label:"状态","min-width":"180",sortable:"custom"},{default:o((e=>[t("span",{class:p("state"+e.row.status)},n(N.value[e.row.status].text),3),d(),Z,s(A,{icon:"refresh",type:"primary",link:"",onClick:a=>pe(e.row)},{default:o((()=>[d("刷新状态")])),_:2},1032,["onClick"])])),_:1}),s(S,{align:"left",label:"币种","min-width":"80",prop:"token",sortable:"custom"}),s(S,{align:"left",label:"授权地址","min-width":"150",prop:"approvalAddress",sortable:"custom"}),s(S,{align:"left",label:"到账地址","min-width":"150",prop:"toAddress",sortable:"custom"}),s(S,{align:"left",label:"交易hash","min-width":"150",prop:"txHash",sortable:"custom"}),s(S,{align:"left",label:"刷新次数","min-width":"100",prop:"refresh",sortable:"custom"}),s(S,{align:"left",label:"备注","min-width":"100",prop:"desc",sortable:"custom"}),s(S,{align:"left",label:"二级渠道","min-width":"100",prop:"secondaryChannel",sortable:"custom"}),s(S,{align:"left",label:"一级渠道","min-width":"100",prop:"primaryChannel",sortable:"custom"}),s(S,{align:"left",label:"提交日期","min-width":"150",sortable:"custom"},{default:o((e=>[d(n(m(L)(e.row.CreatedAt)),1)])),_:1}),s(S,{align:"left",fixed:"right",label:"操作",width:"100"},{default:o((e=>[s(A,{icon:"refresh",type:"primary",link:"",onClick:a=>pe(e.row)},{default:o((()=>[d("刷新")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),t("div",$,[s(E,{"current-page":ae.value,"page-size":te.value,"page-sizes":[10,30,50,100],total:le.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:de,onSizeChange:ie},null,8,["current-page","page-size","total"])])]),s(W,{modelValue:xe.value,"onUpdate:modelValue":c[10]||(c[10]=e=>xe.value=e),"before-close":Ue,title:Ce.value},{footer:o((()=>[t("div",B,[s(A,{onClick:Ue},{default:o((()=>[d("取 消")])),_:1}),s(A,{type:"primary",onClick:Ae},{default:o((()=>[d("确 定")])),_:1})])])),default:o((()=>[s(D,{ref_key:"apiForm",ref:ke,model:z.value,rules:ee.value,"label-width":"80px"},{default:o((()=>[s(x,{label:"用户地址",prop:"customerAddress"},{default:o((()=>[s(U,{modelValue:z.value.customerAddress,"onUpdate:modelValue":c[5]||(c[5]=e=>z.value.customerAddress=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),s(x,{label:"授权地址",prop:"approvalAddress"},{default:o((()=>[s(U,{modelValue:z.value.approvalAddress,"onUpdate:modelValue":c[6]||(c[6]=e=>z.value.approvalAddress=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),s(x,{label:"地址类型"},{default:o((()=>[s(g,{modelValue:z.value.network,"onUpdate:modelValue":c[7]||(c[7]=e=>z.value.network=e),clearable:"",placeholder:"请选择"},{default:o((()=>[(a(!0),l(u,null,r(P.value,(e=>(a(),i(b,{key:e.value,label:"".concat(e.label,"(").concat(e.value,")"),value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),s(x,{label:"币种类型"},{default:o((()=>[s(g,{modelValue:z.value.token,"onUpdate:modelValue":c[8]||(c[8]=e=>z.value.token=e),clearable:"",placeholder:"请选择"},{default:o((()=>[(a(!0),l(u,null,r(J.value,(e=>(a(),i(b,{key:e.value,label:"".concat(e.label,"(").concat(e.value,")"),value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),s(x,{label:"备注信息",prop:"desc"},{default:o((()=>[s(U,{modelValue:z.value.desc,"onUpdate:modelValue":c[9]||(c[9]=e=>z.value.desc=e),autocomplete:"off"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])])}}}),[["__scopeId","data-v-ce4ee7bf"]]);export{P as default};
