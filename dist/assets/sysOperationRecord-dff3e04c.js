/*! 
 Build based on gin-vue-admin 
 Time : 1697372399000 */
import{s as e,a,Y as l,o as t,c as o,b as s,d as r,w as i,g as u,t as p,G as n,h as d,k as m,l as c,E as v,J as f}from"./index-f8b29c45.js";import{E as g}from"./pagination-c993fc24.js";/* empty css              */import"./tag-373c9951.js";import"./select-b1bc1c88.js";import"./scrollbar-c461322d.js";/* empty css               */import{E as h,a as y}from"./table-column-c56acf44.js";import"./checkbox-0d40d18f.js";/* empty css                *//* empty css             */import{E as b}from"./popover-f2b01d49.js";import{a as j,E as w}from"./form-item-b45927e2.js";/* empty css               */import{f as _}from"./format-10da63a7.js";import{E as k}from"./index-b83af27e.js";import"./isEqual-914bba85.js";import"./_Uint8Array-b6bd5a9f.js";import"./index-c6707ffb.js";import"./strings-594f22a4.js";import"./debounce-daeb5e71.js";import"./_initCloneObject-55cd1d54.js";import"./dropdown-01814423.js";import"./_baseClone-609c4491.js";import"./date-225eaf4f.js";import"./dictionary-cb623fa1.js";import"./sysDictionary-a05da767.js";const x={class:"gva-search-box"},C={class:"gva-table-box"},V={class:"gva-btn-list"},E=s("p",null,"确定要删除吗？",-1),O={style:{"text-align":"right","margin-top":"8px"}},S={class:"popover-box"},z={key:1},R={class:"popover-box"},U={key:1},I={class:"gva-pagination"},D={name:"SysOperationRecord"},N=Object.assign(D,{setup(D){const N=a(1),A=a(0),J=a(10),Y=a([]),q=a({}),B=()=>{q.value={}},G=()=>{N.value=1,J.value=10,""===q.value.status&&(q.value.status=null),T()},L=e=>{J.value=e,T()},P=e=>{N.value=e,T()},T=async()=>{const a=await(l={page:N.value,pageSize:J.value,...q.value},e({url:"/sysOperationRecord/getSysOperationRecordList",method:"get",params:l}));var l;0===a.code&&(Y.value=a.data.list,A.value=a.data.total,N.value=a.data.page,J.value=a.data.pageSize)};T();const X=a(!1),Z=a([]),$=e=>{Z.value=e},F=async()=>{const a=[];Z.value&&Z.value.forEach((e=>{a.push(e.ID)}));var l;0===(await(l={ids:a},e({url:"/sysOperationRecord/deleteSysOperationRecordByIds",method:"delete",data:l}))).code&&(m({type:"success",message:"删除成功"}),Y.value.length===a.length&&N.value>1&&N.value--,X.value=!1,T())},H=e=>{try{return JSON.parse(e)}catch(a){return e}};return(e,a)=>{const m=c,D=j,T=v,K=w,M=b,Q=h,W=k,ee=l("warning"),ae=f,le=y,te=g;return t(),o("div",null,[s("div",x,[r(K,{inline:!0,model:q.value},{default:i((()=>[r(D,{label:"请求方法"},{default:i((()=>[r(m,{modelValue:q.value.method,"onUpdate:modelValue":a[0]||(a[0]=e=>q.value.method=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),r(D,{label:"请求路径"},{default:i((()=>[r(m,{modelValue:q.value.path,"onUpdate:modelValue":a[1]||(a[1]=e=>q.value.path=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),r(D,{label:"结果状态码"},{default:i((()=>[r(m,{modelValue:q.value.status,"onUpdate:modelValue":a[2]||(a[2]=e=>q.value.status=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),r(D,null,{default:i((()=>[r(T,{type:"primary",icon:"search",onClick:G},{default:i((()=>[u("查询")])),_:1}),r(T,{icon:"refresh",onClick:B},{default:i((()=>[u("重置")])),_:1})])),_:1})])),_:1},8,["model"])]),s("div",C,[s("div",V,[r(M,{modelValue:X.value,"onUpdate:modelValue":a[5]||(a[5]=e=>X.value=e),placement:"top",width:"160"},{reference:i((()=>[r(T,{icon:"delete",style:{"margin-left":"10px"},disabled:!Z.value.length,onClick:a[4]||(a[4]=e=>X.value=!0)},{default:i((()=>[u("删除")])),_:1},8,["disabled"])])),default:i((()=>[E,s("div",O,[r(T,{type:"primary",link:"",onClick:a[3]||(a[3]=e=>X.value=!1)},{default:i((()=>[u("取消")])),_:1}),r(T,{type:"primary",onClick:F},{default:i((()=>[u("确定")])),_:1})])])),_:1},8,["modelValue"])]),r(le,{ref:"multipleTable",data:Y.value,style:{width:"100%"},"tooltip-effect":"dark","row-key":"ID",onSelectionChange:$},{default:i((()=>[r(Q,{align:"left",type:"selection",width:"55"}),r(Q,{align:"left",label:"操作人",width:"140"},{default:i((e=>[s("div",null,p(e.row.user.userName)+"("+p(e.row.user.nickName)+")",1)])),_:1}),r(Q,{align:"left",label:"日期",width:"180"},{default:i((e=>[u(p(n(_)(e.row.CreatedAt)),1)])),_:1}),r(Q,{align:"left",label:"状态码",prop:"status",width:"120"},{default:i((e=>[s("div",null,[r(W,{type:"success"},{default:i((()=>[u(p(e.row.status),1)])),_:2},1024)])])),_:1}),r(Q,{align:"left",label:"请求IP",prop:"ip",width:"120"}),r(Q,{align:"left",label:"请求方法",prop:"method",width:"120"}),r(Q,{align:"left",label:"请求路径",prop:"path",width:"240"}),r(Q,{align:"left",label:"请求",prop:"path",width:"180"},{default:i((e=>[s("div",null,[e.row.body?(t(),d(M,{key:0,placement:"left-start",trigger:"click"},{reference:i((()=>[r(ae,{style:{cursor:"pointer"}},{default:i((()=>[r(ee)])),_:1})])),default:i((()=>[s("div",S,[s("pre",null,p(H(e.row.body)),1)])])),_:2},1024)):(t(),o("span",z,"无"))])])),_:1}),r(Q,{align:"left",label:"响应",prop:"path",width:"180"},{default:i((e=>[s("div",null,[e.row.resp?(t(),d(M,{key:0,placement:"left-start",trigger:"click"},{reference:i((()=>[r(ae,{style:{cursor:"pointer"}},{default:i((()=>[r(ee)])),_:1})])),default:i((()=>[s("div",R,[s("pre",null,p(H(e.row.resp)),1)])])),_:2},1024)):(t(),o("span",U,"无"))])])),_:1})])),_:1},8,["data"]),s("div",I,[r(te,{"current-page":N.value,"page-size":J.value,"page-sizes":[10,30,50,100],total:A.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:P,onSizeChange:L},null,8,["current-page","page-size","total"])])])])}}});export{N as default};
