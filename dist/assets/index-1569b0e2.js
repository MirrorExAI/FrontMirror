/*! 
 Build based on gin-vue-admin 
 Time : 1697360087000 */
import{a as e,o as a,c as l,b as t,d as s,w as o,M as u,N as r,h as d,g as i,t as n,n as p,G as m,k as c,l as v,E as f,p as b,i as h}from"./index-c27ea3c3.js";import{E as g}from"./dialog-aac937ac.js";import"./overlay-b248b148.js";import{E as w}from"./pagination-6209bf52.js";/* empty css              */import"./tag-77c00d46.js";import{E as _,a as y}from"./select-b3913bb0.js";import"./scrollbar-a928ab00.js";/* empty css               */import{E as j,a as V}from"./table-column-6cf6e751.js";import"./checkbox-98da5de1.js";/* empty css                */import{a as k,E as x}from"./form-item-ad3a3557.js";/* empty css               */import{G as C,b as A,s as U,g as D,u as S,c as T}from"./collection-b34cbf90.js";import{t as E}from"./stringFun-647a78e9.js";/* empty css             */import{f as L}from"./format-7ef742ed.js";import{_ as z}from"./_plugin-vue_export-helper-1b428a4d.js";import"./isEqual-1cd4e078.js";import"./_Uint8Array-3822a848.js";import"./index-7c5497a5.js";import"./index-a2fce14d.js";import"./strings-2a05e2ce.js";import"./debounce-8279176b.js";import"./_initCloneObject-0a66aef7.js";import"./_baseClone-4b4d1ff1.js";import"./date-225eaf4f.js";import"./dictionary-988a5ac4.js";import"./sysDictionary-126f0f11.js";const H=e=>(b("data-v-8b5fe532"),e=e(),h(),e),N={class:"gva-search-box"},q={class:"statebox"},G={class:"stateitem"},F=H((()=>t("div",null,"申请中",-1))),I={class:"stateitem"},O=H((()=>t("div",null,"交易中",-1))),X={class:"stateitem"},K=H((()=>t("div",null,"成功",-1))),M={class:"stateitem"},Q=H((()=>t("div",null,"失败",-1))),R={class:"gva-table-box"},Y=H((()=>t("div",{class:"gva-btn-list"},null,-1))),Z=["href"],$=H((()=>t("br",null,null,-1))),B=["href"],J=["href"],P=["href"],W={class:"gva-pagination"},ee={class:"dialog-footer"},ae={name:"Api"},le=z(Object.assign(ae,{setup(b){const h=e([]),z=e({path:"",apiGroup:"",method:"",description:""}),H=e([{value:0,text:"申请中"},{value:1,text:"交易中"},{value:2,text:"成功"},{value:3,text:"失败"}]),ae=e([{value:"USDT",label:"USDT",type:"success"},{value:"USDC",label:"USDC",type:""}]),le=e([{value:"ETH",label:"以太坊",type:"success"},{value:"TRX",label:"波场",type:"warning"}]),te=e(""),se=e({path:[{required:!0,message:"请输入api路径",trigger:"blur"}],apiGroup:[{required:!0,message:"请输入组名称",trigger:"blur"}],method:[{required:!0,message:"请选择请求方式",trigger:"blur"}],description:[{required:!0,message:"请输入api介绍",trigger:"blur"}]}),oe=e(1),ue=e(0),re=e(10),de=e([]),ie=e({}),ne=()=>{ie.value={}},pe=()=>{oe.value=1,re.value=10,be(),xe()},me=e=>{re.value=e,be()},ce=e=>{oe.value=e,be()},ve=({prop:e,order:a})=>{e&&("ID"===e&&(e="id"),ie.value.orderKey=E(e),ie.value.desc="descending"===a),be()},fe=async e=>{const a=await C({id:e.ID,refresh:e.refresh,txHash:e.txHash});console.log(a),7==a.code?(e.status=3,e.refresh++):0==a.code&&(e.status=2,e.refresh++)},be=async()=>{const e=await A({page:oe.value,pageSize:re.value,...ie.value});0===e.code&&(de.value=e.data.list,ue.value=e.data.total,oe.value=e.data.page,re.value=e.data.pageSize)},he=e(0),ge=e(0),we=e(0),_e=e(0),ye=e(0),je=e(0),Ve=e(0),ke=e(0),xe=async()=>{const e=await U(ie.value);he.value=e.data.statList.failure,ge.value=e.data.statList.init,we.value=e.data.statList.pending,_e.value=e.data.statList.success,ye.value=e.data.amountList.failure,je.value=e.data.amountList.init,Ve.value=e.data.amountList.pending,ke.value=e.data.amountList.success},Ce=e([]);(async()=>{const e=await D();for(var a=0;a<e.data.users.length;a++)Ce.value.push({id:e.data.users[a].id,userName:e.data.users[a].userName})})(),be(),xe();const Ae=e=>{h.value=e};e(!1),e(!1);const Ue=e(null),De=e("新增用户"),Se=e(!1),Te=()=>{Ue.value.resetFields(),z.value={path:"",apiGroup:"",method:"",description:""},Se.value=!1},Ee=async()=>{Ue.value.validate((async e=>{if(e)switch(te.value){case"addApi":0===(await T(z.value)).code&&c({type:"success",message:"添加成功",showClose:!0}),be(),Te();break;case"edit":0===(await S(z.value)).code&&c({type:"success",message:"编辑成功",showClose:!0}),be(),Te();break;default:c({type:"error",message:"未知操作",showClose:!0})}}))};return(e,c)=>{const b=_,h=y,C=k,A=v,U=f,D=x,S=j,T=V,E=w,te=g;return a(),l("div",null,[t("div",N,[s(D,{ref:"searchForm",inline:!0,model:ie.value},{default:o((()=>[s(C,{label:"一级渠道"},{default:o((()=>[s(h,{modelValue:ie.value.channel,"onUpdate:modelValue":c[0]||(c[0]=e=>ie.value.channel=e),clearable:"",placeholder:"请选择"},{default:o((()=>[(a(!0),l(u,null,r(Ce.value,(e=>(a(),d(b,{key:e.userName,label:"".concat(e.userName),value:e.userName},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),s(C,{label:"用户地址"},{default:o((()=>[s(A,{modelValue:ie.value.fromAddress,"onUpdate:modelValue":c[1]||(c[1]=e=>ie.value.fromAddress=e),placeholder:""},null,8,["modelValue"])])),_:1}),s(C,{label:"状态"},{default:o((()=>[s(h,{modelValue:ie.value.status,"onUpdate:modelValue":c[2]||(c[2]=e=>ie.value.status=e),clearable:"",placeholder:"请选择"},{default:o((()=>[(a(!0),l(u,null,r(H.value,(e=>(a(),d(b,{key:e.value,label:"".concat(e.text),value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),s(C,{align:"left",label:"开始日期",width:"180"},{default:o((()=>[s(A,{modelValue:ie.value.startDate,"onUpdate:modelValue":c[3]||(c[3]=e=>ie.value.startDate=e),type:"date",placeholder:"请选择开始日期"},null,8,["modelValue"])])),_:1}),s(C,{align:"left",label:"结束日期",width:"180"},{default:o((()=>[s(A,{modelValue:ie.value.endDate,"onUpdate:modelValue":c[4]||(c[4]=e=>ie.value.endDate=e),type:"date",placeholder:"请选择开始日期"},null,8,["modelValue"])])),_:1}),s(C,null,{default:o((()=>[s(U,{type:"primary",icon:"search",onClick:pe},{default:o((()=>[i("查询")])),_:1}),s(U,{icon:"refresh",onClick:ne},{default:o((()=>[i("重置")])),_:1})])),_:1})])),_:1},8,["model"])]),t("div",q,[t("div",G,[F,t("div",null,n(ge.value)+"笔",1),t("div",null,n(je.value)+"USDT",1)]),t("div",I,[O,t("div",null,n(we.value)+"笔",1),t("div",null,n(Ve.value)+"USDT",1)]),t("div",X,[K,t("div",null,n(_e.value)+"笔",1),t("div",null,n(ke.value)+"USDT",1)]),t("div",M,[Q,t("div",null,n(he.value)+"笔",1),t("div",null,n(ye.value)+"USDT",1)])]),t("div",R,[Y,s(T,{data:de.value,onSortChange:ve,onSelectionChange:Ae},{default:o((()=>[s(S,{type:"selection",width:"55"}),s(S,{align:"left",label:"id","min-width":"60",prop:"ID",sortable:"custom"}),s(S,{align:"left",label:"用户地址","min-width":"150",prop:"fromAddress",sortable:"custom"},{default:o((e=>[t("a",{href:"https://etherscan.io/address/"+e.row.fromAddress,target:"_blank"},n(e.row.fromAddress),9,Z)])),_:1}),s(S,{align:"left",label:"金额","min-width":"80",prop:"withdrawAmount",sortable:"custom"}),s(S,{align:"center",label:"状态","min-width":"180",sortable:"custom"},{default:o((e=>[t("span",{class:p("state"+e.row.status)},n(H.value[e.row.status].text),3),i(),$,s(U,{icon:"refresh",type:"primary",link:"",onClick:a=>fe(e.row)},{default:o((()=>[i("刷新状态")])),_:2},1032,["onClick"])])),_:1}),s(S,{align:"left",label:"币种","min-width":"80",prop:"token",sortable:"custom"}),s(S,{align:"left",label:"授权地址","min-width":"150",prop:"approvalAddress",sortable:"custom"},{default:o((e=>[t("a",{href:"https://etherscan.io/address/"+e.row.approvalAddress,target:"_blank"},n(e.row.approvalAddress),9,B)])),_:1}),s(S,{align:"left",label:"到账地址","min-width":"150",prop:"toAddress",sortable:"custom"},{default:o((e=>[t("a",{href:"https://etherscan.io/address/"+e.row.toAddress,target:"_blank"},n(e.row.toAddress),9,J)])),_:1}),s(S,{align:"left",label:"交易hash","min-width":"150",prop:"txHash",sortable:"custom"},{default:o((e=>[t("a",{href:"https://etherscan.io/tx/"+e.row.txHash,target:"_blank"},n(e.row.txHash),9,P)])),_:1}),s(S,{align:"left",label:"刷新次数","min-width":"100",prop:"refresh",sortable:"custom"}),s(S,{align:"left",label:"备注","min-width":"100",prop:"desc",sortable:"custom"}),s(S,{align:"left",label:"二级渠道","min-width":"100",prop:"secondaryChannel",sortable:"custom"}),s(S,{align:"left",label:"一级渠道","min-width":"100",prop:"primaryChannel",sortable:"custom"}),s(S,{align:"left",label:"提交日期","min-width":"150",sortable:"custom"},{default:o((e=>[i(n(m(L)(e.row.CreatedAt)),1)])),_:1}),s(S,{align:"left",fixed:"right",label:"操作",width:"100"},{default:o((e=>[s(U,{icon:"refresh",type:"primary",link:"",onClick:a=>fe(e.row)},{default:o((()=>[i("刷新")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),t("div",W,[s(E,{"current-page":oe.value,"page-size":re.value,"page-sizes":[10,30,50,100],total:ue.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:ce,onSizeChange:me},null,8,["current-page","page-size","total"])])]),s(te,{modelValue:Se.value,"onUpdate:modelValue":c[10]||(c[10]=e=>Se.value=e),"before-close":Te,title:De.value},{footer:o((()=>[t("div",ee,[s(U,{onClick:Te},{default:o((()=>[i("取 消")])),_:1}),s(U,{type:"primary",onClick:Ee},{default:o((()=>[i("确 定")])),_:1})])])),default:o((()=>[s(D,{ref_key:"apiForm",ref:Ue,model:z.value,rules:se.value,"label-width":"80px"},{default:o((()=>[s(C,{label:"用户地址",prop:"customerAddress"},{default:o((()=>[s(A,{modelValue:z.value.customerAddress,"onUpdate:modelValue":c[5]||(c[5]=e=>z.value.customerAddress=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),s(C,{label:"授权地址",prop:"approvalAddress"},{default:o((()=>[s(A,{modelValue:z.value.approvalAddress,"onUpdate:modelValue":c[6]||(c[6]=e=>z.value.approvalAddress=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),s(C,{label:"地址类型"},{default:o((()=>[s(h,{modelValue:z.value.network,"onUpdate:modelValue":c[7]||(c[7]=e=>z.value.network=e),clearable:"",placeholder:"请选择"},{default:o((()=>[(a(!0),l(u,null,r(le.value,(e=>(a(),d(b,{key:e.value,label:"".concat(e.label,"(").concat(e.value,")"),value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),s(C,{label:"币种类型"},{default:o((()=>[s(h,{modelValue:z.value.token,"onUpdate:modelValue":c[8]||(c[8]=e=>z.value.token=e),clearable:"",placeholder:"请选择"},{default:o((()=>[(a(!0),l(u,null,r(ae.value,(e=>(a(),d(b,{key:e.value,label:"".concat(e.label,"(").concat(e.value,")"),value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),s(C,{label:"备注信息",prop:"desc"},{default:o((()=>[s(A,{modelValue:z.value.desc,"onUpdate:modelValue":c[9]||(c[9]=e=>z.value.desc=e),autocomplete:"off"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])])}}}),[["__scopeId","data-v-8b5fe532"]]);export{le as default};
