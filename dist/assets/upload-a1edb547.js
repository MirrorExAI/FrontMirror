/*! 
 Build based on gin-vue-admin 
 Time : 1696555582000 */
import{a as e,Z as a,o as t,c as o,b as i,d as l,w as s,g as n,t as r,G as p,a4 as m,k as u,l as c,E as d,a5 as g}from"./index-33d179e9.js";/* empty css                */import{E as v}from"./pagination-a4874b9b.js";/* empty css              */import"./tag-0f8d4dae.js";import"./select-a26e10b7.js";import"./scrollbar-81bf16b6.js";/* empty css               */import{E as f,a as j}from"./table-column-6999464b.js";import"./checkbox-56cf07d1.js";/* empty css                *//* empty css               */import{_ as w,U as h,g as y,d as _,e as b}from"./common-05cccbcb.js";import{C as x}from"./index-d1e5f68c.js";import{f as C}from"./format-6abb9e2f.js";import{_ as k}from"./warningBar-6b10fcc0.js";import{_ as U}from"./_plugin-vue_export-helper-1b428a4d.js";import{E}from"./index-f712fbc3.js";import"./isEqual-48baa013.js";import"./_Uint8Array-1dc9e84a.js";import"./index-225ec204.js";import"./strings-3a3a1b4e.js";import"./debounce-b561df10.js";import"./_initCloneObject-3b45d182.js";import"./upload-d74bc7c9.js";import"./progress-910ab077.js";import"./cloneDeep-1ccbdd88.js";import"./_baseClone-0928223b.js";import"./image-viewer-e9617930.js";/* empty css                                                              */import"./date-225eaf4f.js";import"./dictionary-f99dcf05.js";import"./sysDictionary-62483381.js";/* empty css             */const z=(e,a)=>{var t=new Image;t.setAttribute("crossOrigin","anonymous"),t.onload=function(){var e=document.createElement("canvas");e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0,t.width,t.height);var o=e.toDataURL("image/png"),i=document.createElement("a"),l=new MouseEvent("click");i.download=a||"photo",i.href=o,i.dispatchEvent(l)},t.src=e},O={class:"gva-table-box"},B={class:"gva-btn-list"},S=["onClick"],A={class:"gva-pagination"},D={name:"Upload"},T=U(Object.assign(D,{setup(U){const D=e("https://api.bitcoin-wen.com"),T=e(""),V=e(""),I=e(1),L=e(0),M=e(10),Z=e({}),q=e([]),G=e=>{M.value=e,R()},P=e=>{I.value=e,R()},R=async()=>{const e=await y({page:I.value,pageSize:M.value,...Z.value});0===e.code&&(q.value=e.data.list,L.value=e.data.total,I.value=e.data.page,M.value=e.data.pageSize)};R();return(e,y)=>{const U=c,X=d,Y=f,$=E,F=j,H=v,J=g;return a((t(),o("div",null,[i("div",O,[l(k,{title:"点击“文件名/备注”可以编辑文件名或者备注内容。"}),i("div",B,[l(w,{imageCommon:V.value,"onUpdate:imageCommon":y[0]||(y[0]=e=>V.value=e),onOnSuccess:R},null,8,["imageCommon"]),l(h,{imageUrl:T.value,"onUpdate:imageUrl":y[1]||(y[1]=e=>T.value=e),"file-size":512,"max-w-h":1080,onOnSuccess:R},null,8,["imageUrl"]),l(U,{modelValue:Z.value.keyword,"onUpdate:modelValue":y[2]||(y[2]=e=>Z.value.keyword=e),class:"keyword",placeholder:"请输入文件名或备注"},null,8,["modelValue"]),l(X,{type:"primary",icon:"search",onClick:R},{default:s((()=>[n("查询")])),_:1})]),l(F,{data:q.value},{default:s((()=>[l(Y,{align:"left",label:"预览",width:"100"},{default:s((e=>[l(x,{"pic-type":"file","pic-src":e.row.url,preview:""},null,8,["pic-src"])])),_:1}),l(Y,{align:"left",label:"日期",prop:"UpdatedAt",width:"180"},{default:s((e=>[i("div",null,r(p(C)(e.row.UpdatedAt)),1)])),_:1}),l(Y,{align:"left",label:"文件名/备注",prop:"name",width:"180"},{default:s((e=>[i("div",{class:"name",onClick:a=>(async e=>{m.prompt("请输入文件名或者备注","编辑",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S/,inputErrorMessage:"不能为空",inputValue:e.name}).then((async({value:a})=>{e.name=a,0===(await b(e)).code&&(u({type:"success",message:"编辑成功!"}),R())})).catch((()=>{u({type:"info",message:"取消修改"})}))})(e.row)},r(e.row.name),9,S)])),_:1}),l(Y,{align:"left",label:"链接",prop:"url","min-width":"300"}),l(Y,{align:"left",label:"标签",prop:"tag",width:"100"},{default:s((e=>[l($,{type:"jpg"===e.row.tag?"primary":"success","disable-transitions":""},{default:s((()=>[n(r(e.row.tag),1)])),_:2},1032,["type"])])),_:1}),l(Y,{align:"left",label:"操作",width:"160"},{default:s((e=>[l(X,{icon:"download",type:"primary",link:"",onClick:a=>{var t;(t=e.row).url.indexOf("http://")>-1||t.url.indexOf("https://")>-1?z(t.url,t.name):z(D.value+"/"+t.url,t.name)}},{default:s((()=>[n("下载")])),_:2},1032,["onClick"]),l(X,{icon:"delete",type:"primary",link:"",onClick:a=>(async e=>{m.confirm("此操作将永久删除文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{0===(await _(e)).code&&(u({type:"success",message:"删除成功!"}),1===q.value.length&&I.value>1&&I.value--,R())})).catch((()=>{u({type:"info",message:"已取消删除"})}))})(e.row)},{default:s((()=>[n("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),i("div",A,[l(H,{"current-page":I.value,"page-size":M.value,"page-sizes":[10,30,50,100],style:{float:"right",padding:"20px"},total:L.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:P,onSizeChange:G},null,8,["current-page","page-size","total"])])])])),[[J,e.fullscreenLoading,void 0,{fullscreen:!0,lock:!0}]])}}}),[["__scopeId","data-v-acdeba2e"]]);export{T as default};
